version: "3.8"

services:
  workspace:
    image: mcr.microsoft.com/devcontainers/base:bookworm
    privileged: true
    volumes:
      - ..:/workspaces/tempest-city-defense:delegated
      - /var/run/docker.sock:/var/run/docker.sock
      - ${HOME}/.env.secrets:/root/.env.secrets:ro
      - ../.claude-sessions:/root/.claude
      - ../.claude-session-config.json:/root/.claude.json
    env_file:
      - ${HOME}/.env.secrets
    command: sleep infinity
